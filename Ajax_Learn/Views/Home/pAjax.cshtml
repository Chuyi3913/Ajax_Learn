
@{
    ViewData["Title"] = "pAjax";
}

<h1>pAjax</h1>
<form method="post" name="formUser">
    <div class="mb-3">
        <label for="Name" class="form-label">姓名</label>
        <input type="text" name="Name" id="Name" class="form-control" />
    </div>
    <div class="mb-3">
        <label for="Email" class="form-label">Email</label>
        <input type="text" name="Email" id="Email" class="form-control" />
    </div>
    <div class="mb-3">
        <label for="Age" class="form-label">年齡</label>
        <input type="text" name="Age" id="Age" class="form-control"/>
    </div>
    <div class="mb-3">
        <label for="fileForm" class="form-label">照片上傳</label>
        <input type="file" name="photo" id="fileForm" class="form-control" />
    </div>
    <div class="mb-3">
        <input type="submit" value="送出" class="btn btn-primary mb-3" />
    </div>
</form>

<div id="div1"></div>


@section Scripts{
    <script>
        const btn = document.querySelector('input[type="submit"]');
        const theDiv=document.querySelector("#div1");
        

        btn.addEventListener("click", async (event) => {
            event.preventDefault();
            var formData=new FormData(document.formUser);
            fetch(`@Url.Content("~/api/Create")`,{
                method:"post",
                body:formData;
            })








        //var xhr=new XMLHttpRequest();

        //    xhr.addEventListener('load', () => {         
        //        const data = xhr.responseText;         
        //        theDiv.innerHTML =data;
        //    })

        //xhr.open("post", "@Url.Content("~/api/Create")")
        //xhr.send(formData);
        });

        //const xhr = new XMLHttpRequest();
        //xhr.addEventListener('load', () => {
        //    document.querySelector('#div1').innerHTML = xhr.responseText;
        //})
        //xhr.open("POST", "@Url.Content("/api/index")");
        //xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        //xhr.send("name=Jack&age=30");
    </script>
}